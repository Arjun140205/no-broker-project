"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "contexts_SocketContext_tsx";
exports.ids = ["contexts_SocketContext_tsx"];
exports.modules = {

/***/ "./contexts/SocketContext.tsx":
/*!************************************!*\
  !*** ./contexts/SocketContext.tsx ***!
  \************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SocketProvider: () => (/* binding */ SocketProvider),\n/* harmony export */   useSocket: () => (/* binding */ useSocket)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var socket_io_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! socket.io-client */ \"socket.io-client\");\n/* harmony import */ var _hooks_useAuth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../hooks/useAuth */ \"./hooks/useAuth.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([socket_io_client__WEBPACK_IMPORTED_MODULE_2__, _hooks_useAuth__WEBPACK_IMPORTED_MODULE_3__]);\n([socket_io_client__WEBPACK_IMPORTED_MODULE_2__, _hooks_useAuth__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\nconst SocketContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)({\n    socket: null,\n    isConnected: false,\n    sendMessage: ()=>{},\n    onlineUsers: new Set()\n});\nconst useSocket = ()=>(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(SocketContext);\nconst SocketProvider = ({ children })=>{\n    const [socket, setSocket] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isConnected, setIsConnected] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [onlineUsers, setOnlineUsers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(new Set());\n    const { user, isAuthenticated } = (0,_hooks_useAuth__WEBPACK_IMPORTED_MODULE_3__.useAuth)();\n    // Initialize socket connection\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (isAuthenticated && user) {\n            // Connect to socket server\n            const socketInstance = (0,socket_io_client__WEBPACK_IMPORTED_MODULE_2__.io)(\"http://localhost:4000\" || 0, {\n                withCredentials: true,\n                extraHeaders: {\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n            // Set up event listeners\n            socketInstance.on(\"connect\", ()=>{\n                console.log(\"Socket connected!\");\n                setIsConnected(true);\n                // Authenticate with the socket server\n                socketInstance.emit(\"authenticate\", user.id);\n            });\n            socketInstance.on(\"disconnect\", ()=>{\n                console.log(\"Socket disconnected!\");\n                setIsConnected(false);\n            });\n            socketInstance.on(\"user_status_change\", ({ userId, status })=>{\n                setOnlineUsers((prev)=>{\n                    const newSet = new Set(prev);\n                    if (status === \"online\") {\n                        newSet.add(userId);\n                    } else {\n                        newSet.delete(userId);\n                    }\n                    return newSet;\n                });\n            });\n            setSocket(socketInstance);\n            // Clean up on unmount\n            return ()=>{\n                socketInstance.disconnect();\n            };\n        }\n    }, [\n        isAuthenticated,\n        user\n    ]);\n    // Function to send a message\n    const sendMessage = (receiverId, content)=>{\n        if (socket && isConnected && user) {\n            socket.emit(\"send_message\", {\n                senderId: user.id,\n                receiverId,\n                content\n            });\n        } else {\n            console.error(\"Socket not connected, cannot send message\");\n        }\n    };\n    const value = {\n        socket,\n        isConnected,\n        sendMessage,\n        onlineUsers\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(SocketContext.Provider, {\n        value: value,\n        children: children\n    }, void 0, false, {\n        fileName: \"/Users/arjunbirsingh/estospaces/frontend/contexts/SocketContext.tsx\",\n        lineNumber: 99,\n        columnNumber: 5\n    }, undefined);\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb250ZXh0cy9Tb2NrZXRDb250ZXh0LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBOEU7QUFDaEM7QUFDSDtBQVUzQyxNQUFNTyw4QkFBZ0JOLG9EQUFhQSxDQUFvQjtJQUNyRE8sUUFBUTtJQUNSQyxhQUFhO0lBQ2JDLGFBQWEsS0FBTztJQUNwQkMsYUFBYSxJQUFJQztBQUNuQjtBQUVPLE1BQU1DLFlBQVksSUFBTVgsaURBQVVBLENBQUNLLGVBQWU7QUFNbEQsTUFBTU8saUJBQWdELENBQUMsRUFBRUMsUUFBUSxFQUFFO0lBQ3hFLE1BQU0sQ0FBQ1AsUUFBUVEsVUFBVSxHQUFHWiwrQ0FBUUEsQ0FBZ0I7SUFDcEQsTUFBTSxDQUFDSyxhQUFhUSxlQUFlLEdBQUdiLCtDQUFRQSxDQUFVO0lBQ3hELE1BQU0sQ0FBQ08sYUFBYU8sZUFBZSxHQUFHZCwrQ0FBUUEsQ0FBYyxJQUFJUTtJQUNoRSxNQUFNLEVBQUVPLElBQUksRUFBRUMsZUFBZSxFQUFFLEdBQUdkLHVEQUFPQTtJQUV6QywrQkFBK0I7SUFDL0JILGdEQUFTQSxDQUFDO1FBQ1IsSUFBSWlCLG1CQUFtQkQsTUFBTTtZQUMzQiwyQkFBMkI7WUFDM0IsTUFBTUUsaUJBQWlCaEIsb0RBQUVBLENBQUNpQix1QkFBK0IsSUFBSSxHQUF5QjtnQkFDcEZHLGlCQUFpQjtnQkFDakJDLGNBQWM7b0JBQ1osZ0JBQWdCO2dCQUNsQjtZQUNGO1lBRUEseUJBQXlCO1lBQ3pCTCxlQUFlTSxFQUFFLENBQUMsV0FBVztnQkFDM0JDLFFBQVFDLEdBQUcsQ0FBQztnQkFDWlosZUFBZTtnQkFFZixzQ0FBc0M7Z0JBQ3RDSSxlQUFlUyxJQUFJLENBQUMsZ0JBQWdCWCxLQUFLWSxFQUFFO1lBQzdDO1lBRUFWLGVBQWVNLEVBQUUsQ0FBQyxjQUFjO2dCQUM5QkMsUUFBUUMsR0FBRyxDQUFDO2dCQUNaWixlQUFlO1lBQ2pCO1lBRUFJLGVBQWVNLEVBQUUsQ0FBQyxzQkFBc0IsQ0FBQyxFQUFFSyxNQUFNLEVBQUVDLE1BQU0sRUFBRTtnQkFDekRmLGVBQWVnQixDQUFBQTtvQkFDYixNQUFNQyxTQUFTLElBQUl2QixJQUFJc0I7b0JBQ3ZCLElBQUlELFdBQVcsVUFBVTt3QkFDdkJFLE9BQU9DLEdBQUcsQ0FBQ0o7b0JBQ2IsT0FBTzt3QkFDTEcsT0FBT0UsTUFBTSxDQUFDTDtvQkFDaEI7b0JBQ0EsT0FBT0c7Z0JBQ1Q7WUFDRjtZQUVBbkIsVUFBVUs7WUFFVixzQkFBc0I7WUFDdEIsT0FBTztnQkFDTEEsZUFBZWlCLFVBQVU7WUFDM0I7UUFDRjtJQUNGLEdBQUc7UUFBQ2xCO1FBQWlCRDtLQUFLO0lBRTFCLDZCQUE2QjtJQUM3QixNQUFNVCxjQUFjLENBQUM2QixZQUFvQkM7UUFDdkMsSUFBSWhDLFVBQVVDLGVBQWVVLE1BQU07WUFDakNYLE9BQU9zQixJQUFJLENBQUMsZ0JBQWdCO2dCQUMxQlcsVUFBVXRCLEtBQUtZLEVBQUU7Z0JBQ2pCUTtnQkFDQUM7WUFDRjtRQUNGLE9BQU87WUFDTFosUUFBUWMsS0FBSyxDQUFDO1FBQ2hCO0lBQ0Y7SUFFQSxNQUFNQyxRQUFRO1FBQ1puQztRQUNBQztRQUNBQztRQUNBQztJQUNGO0lBRUEscUJBQ0UsOERBQUNKLGNBQWNxQyxRQUFRO1FBQUNELE9BQU9BO2tCQUM1QjVCOzs7Ozs7QUFHUCxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXN0b3NwYWNlcy1mcm9udGVuZC8uL2NvbnRleHRzL1NvY2tldENvbnRleHQudHN4PzkxNmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQsIHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBpbywgU29ja2V0IH0gZnJvbSAnc29ja2V0LmlvLWNsaWVudCc7XG5pbXBvcnQgeyB1c2VBdXRoIH0gZnJvbSAnLi4vaG9va3MvdXNlQXV0aCc7XG5pbXBvcnQgeyBEaXJlY3RNZXNzYWdlIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5pbnRlcmZhY2UgU29ja2V0Q29udGV4dFR5cGUge1xuICBzb2NrZXQ6IFNvY2tldCB8IG51bGw7XG4gIGlzQ29ubmVjdGVkOiBib29sZWFuO1xuICBzZW5kTWVzc2FnZTogKHJlY2VpdmVySWQ6IHN0cmluZywgY29udGVudDogc3RyaW5nKSA9PiB2b2lkO1xuICBvbmxpbmVVc2VyczogU2V0PHN0cmluZz47XG59XG5cbmNvbnN0IFNvY2tldENvbnRleHQgPSBjcmVhdGVDb250ZXh0PFNvY2tldENvbnRleHRUeXBlPih7XG4gIHNvY2tldDogbnVsbCxcbiAgaXNDb25uZWN0ZWQ6IGZhbHNlLFxuICBzZW5kTWVzc2FnZTogKCkgPT4ge30sXG4gIG9ubGluZVVzZXJzOiBuZXcgU2V0PHN0cmluZz4oKVxufSk7XG5cbmV4cG9ydCBjb25zdCB1c2VTb2NrZXQgPSAoKSA9PiB1c2VDb250ZXh0KFNvY2tldENvbnRleHQpO1xuXG5pbnRlcmZhY2UgU29ja2V0UHJvdmlkZXJQcm9wcyB7XG4gIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGU7XG59XG5cbmV4cG9ydCBjb25zdCBTb2NrZXRQcm92aWRlcjogUmVhY3QuRkM8U29ja2V0UHJvdmlkZXJQcm9wcz4gPSAoeyBjaGlsZHJlbiB9KSA9PiB7XG4gIGNvbnN0IFtzb2NrZXQsIHNldFNvY2tldF0gPSB1c2VTdGF0ZTxTb2NrZXQgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2lzQ29ubmVjdGVkLCBzZXRJc0Nvbm5lY3RlZF0gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XG4gIGNvbnN0IFtvbmxpbmVVc2Vycywgc2V0T25saW5lVXNlcnNdID0gdXNlU3RhdGU8U2V0PHN0cmluZz4+KG5ldyBTZXQoKSk7XG4gIGNvbnN0IHsgdXNlciwgaXNBdXRoZW50aWNhdGVkIH0gPSB1c2VBdXRoKCk7XG5cbiAgLy8gSW5pdGlhbGl6ZSBzb2NrZXQgY29ubmVjdGlvblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpc0F1dGhlbnRpY2F0ZWQgJiYgdXNlcikge1xuICAgICAgLy8gQ29ubmVjdCB0byBzb2NrZXQgc2VydmVyXG4gICAgICBjb25zdCBzb2NrZXRJbnN0YW5jZSA9IGlvKHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQSV9VUkwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6NDAwMCcsIHtcbiAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlLFxuICAgICAgICBleHRyYUhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gU2V0IHVwIGV2ZW50IGxpc3RlbmVyc1xuICAgICAgc29ja2V0SW5zdGFuY2Uub24oJ2Nvbm5lY3QnLCAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdTb2NrZXQgY29ubmVjdGVkIScpO1xuICAgICAgICBzZXRJc0Nvbm5lY3RlZCh0cnVlKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEF1dGhlbnRpY2F0ZSB3aXRoIHRoZSBzb2NrZXQgc2VydmVyXG4gICAgICAgIHNvY2tldEluc3RhbmNlLmVtaXQoJ2F1dGhlbnRpY2F0ZScsIHVzZXIuaWQpO1xuICAgICAgfSk7XG5cbiAgICAgIHNvY2tldEluc3RhbmNlLm9uKCdkaXNjb25uZWN0JywgKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnU29ja2V0IGRpc2Nvbm5lY3RlZCEnKTtcbiAgICAgICAgc2V0SXNDb25uZWN0ZWQoZmFsc2UpO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHNvY2tldEluc3RhbmNlLm9uKCd1c2VyX3N0YXR1c19jaGFuZ2UnLCAoeyB1c2VySWQsIHN0YXR1cyB9KSA9PiB7XG4gICAgICAgIHNldE9ubGluZVVzZXJzKHByZXYgPT4ge1xuICAgICAgICAgIGNvbnN0IG5ld1NldCA9IG5ldyBTZXQocHJldik7XG4gICAgICAgICAgaWYgKHN0YXR1cyA9PT0gJ29ubGluZScpIHtcbiAgICAgICAgICAgIG5ld1NldC5hZGQodXNlcklkKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3U2V0LmRlbGV0ZSh1c2VySWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbmV3U2V0O1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBzZXRTb2NrZXQoc29ja2V0SW5zdGFuY2UpO1xuXG4gICAgICAvLyBDbGVhbiB1cCBvbiB1bm1vdW50XG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBzb2NrZXRJbnN0YW5jZS5kaXNjb25uZWN0KCk7XG4gICAgICB9O1xuICAgIH1cbiAgfSwgW2lzQXV0aGVudGljYXRlZCwgdXNlcl0pO1xuXG4gIC8vIEZ1bmN0aW9uIHRvIHNlbmQgYSBtZXNzYWdlXG4gIGNvbnN0IHNlbmRNZXNzYWdlID0gKHJlY2VpdmVySWQ6IHN0cmluZywgY29udGVudDogc3RyaW5nKSA9PiB7XG4gICAgaWYgKHNvY2tldCAmJiBpc0Nvbm5lY3RlZCAmJiB1c2VyKSB7XG4gICAgICBzb2NrZXQuZW1pdCgnc2VuZF9tZXNzYWdlJywge1xuICAgICAgICBzZW5kZXJJZDogdXNlci5pZCxcbiAgICAgICAgcmVjZWl2ZXJJZCxcbiAgICAgICAgY29udGVudFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1NvY2tldCBub3QgY29ubmVjdGVkLCBjYW5ub3Qgc2VuZCBtZXNzYWdlJyk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHZhbHVlID0ge1xuICAgIHNvY2tldCxcbiAgICBpc0Nvbm5lY3RlZCxcbiAgICBzZW5kTWVzc2FnZSxcbiAgICBvbmxpbmVVc2Vyc1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPFNvY2tldENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3ZhbHVlfT5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8L1NvY2tldENvbnRleHQuUHJvdmlkZXI+XG4gICk7XG59O1xuIl0sIm5hbWVzIjpbIlJlYWN0IiwiY3JlYXRlQ29udGV4dCIsInVzZUNvbnRleHQiLCJ1c2VFZmZlY3QiLCJ1c2VTdGF0ZSIsImlvIiwidXNlQXV0aCIsIlNvY2tldENvbnRleHQiLCJzb2NrZXQiLCJpc0Nvbm5lY3RlZCIsInNlbmRNZXNzYWdlIiwib25saW5lVXNlcnMiLCJTZXQiLCJ1c2VTb2NrZXQiLCJTb2NrZXRQcm92aWRlciIsImNoaWxkcmVuIiwic2V0U29ja2V0Iiwic2V0SXNDb25uZWN0ZWQiLCJzZXRPbmxpbmVVc2VycyIsInVzZXIiLCJpc0F1dGhlbnRpY2F0ZWQiLCJzb2NrZXRJbnN0YW5jZSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19BUElfVVJMIiwid2l0aENyZWRlbnRpYWxzIiwiZXh0cmFIZWFkZXJzIiwib24iLCJjb25zb2xlIiwibG9nIiwiZW1pdCIsImlkIiwidXNlcklkIiwic3RhdHVzIiwicHJldiIsIm5ld1NldCIsImFkZCIsImRlbGV0ZSIsImRpc2Nvbm5lY3QiLCJyZWNlaXZlcklkIiwiY29udGVudCIsInNlbmRlcklkIiwiZXJyb3IiLCJ2YWx1ZSIsIlByb3ZpZGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./contexts/SocketContext.tsx\n");

/***/ })

};
;